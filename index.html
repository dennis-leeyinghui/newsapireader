<!doctype html>

<html lang="en">
<head>

  <title>The HTML5 Herald</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" integrity="sha512-EZLkOqwILORob+p0BXZc+Vm3RgJBOe1Iq/0fiI7r/wJgzOFZMlsqTa29UEl6v6U6gsV4uIpsNZoV32YZqrCRCQ==" crossorigin="anonymous" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<body>
  <form class="search" action="">
		<label for="">News</label>
		<input class="input" type="text" /><br>
		<input type="submit" />
  </form>

  <div class=container">
		<ul class="news-list"></ul>
  </div>

	<script>
		const searchFrom = document.querySelector('.search');
		const input = document.querySelector('.input');
		const newsList = document.querySelector('.news-list');

		searchFrom.addEventListener('submit', retrieve)

		function retrieve(e){

			if (input.value == '') {

				alert('Input field is empty!');
				return;
			
			}

			newsList.innerHTML = '';

			e.preventDefault();

			const reqOptions = { 'mode': 'cors', headers: { 'Access-Control-Allow-Origin': '*' } };

			const apiKey = YOUR_API_KEY_HERE;

			let topic = input.value;

			let url = 'https://newsapi.org/v2/everything?q='+ topic + "&apiKey=" + apiKey;

			fetch(url)

			  .then((res)=>{
				return res.json() })

		      .then((data)=>{
				console.log(data);
				data.articles.forEach(article => {

					let li = document.createElement('li');
					let a = document.createElement('a');
					a.setAttribute('href', article.url);
					a.setAttribute('target', '_blank');
					a.textContent = article.title;
					li.appendChild(a);
					newsList.appendChild(li); 
				
				}) 
			}).catch((error)=> {
				console.log(error);
			})

			console.log(topic);
		
		}
	</script>

</body>
</html>
